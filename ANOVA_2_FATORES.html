<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>ANOVA - Volume de Vendas por Região</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            color: #222;
            line-height: 1.5;
        }
        h1 { font-size: 32px; }
        h2 { margin-top: 28px; }
        h3 { margin-top: 18px; }
        table {
            border-collapse: collapse;
            width: 70%;
            margin-top: 16px;
        }
        th, td {
            border: 1px solid #bbb;
            padding: 6px 10px;
            text-align: center;
        }
        th { background-color: #eee; }
        pre {
            background-color: #f8f8f8;
            padding: 10px;
            border: 1px solid #ddd;
            overflow-x: auto;
        }
        code { font-family: Consolas, "Courier New", monospace; }
    </style>
</head>
<body>

<h1>ANOVA – Volume de Vendas por Região</h1>
<p><strong>Luís Gustavo Pimentel Imbeloni (lgimbeloni23@gmail.com)</strong></p>

<!-- 1) CONTEXTO E OBJETIVO -->
<h2>1. Contexto e Objetivo</h2>

<p>
Uma empresa de venda de automóveis deseja avaliar se o <strong>volume médio de vendas mensais
(em R$ mil)</strong> é diferente entre quatro regiões de atuação: <em>Norte</em>, <em>Sul</em>, <em>Leste</em> e <em>Oeste</em>.
Foram selecionadas 5 lojas de cada região e registrado o volume vendido no último mês,
totalizando 20 observações.
</p>

<p>
A técnica utilizada será a <strong>Análise de Variância (ANOVA de um fator)</strong>, cujo objetivo é testar:
</p>

<ul>
    <li><strong>H<sub>0</sub>:</strong> as médias de vendas são iguais nas quatro regiões;</li>
    <li><strong>H<sub>1</sub>:</strong> pelo menos uma região possui média de vendas diferente.</li>
</ul>

<h3>Por que ANOVA (e não só comparar médias simples)?</h3>

<p>
Poderíamos calcular a média de vendas de cada região e comparar visualmente ou
com alguns testes t. O problema é que isso:
</p>
<ul>
    <li><strong>Ignora a variabilidade interna</strong> de cada região. Duas regiões podem ter médias parecidas, mas uma ser muito instável (lojas vendendo 10, 50, 90) e outra bem consistente (todas vendendo perto de 40).</li>
    <li><strong>Não controla o erro tipo I</strong>. Se fizermos vários testes t par-a-par (Norte vs Sul, Norte vs Leste, etc.), aumentamos a chance de encontrar “diferenças” que são apenas acaso.</li>
    <li><strong>Não olha todos os grupos ao mesmo tempo</strong>. A ANOVA compara simultaneamente as 4 regiões, usando a relação entre a variância entre grupos e a variância dentro dos grupos.</li>
</ul>

<p>
A ANOVA responde, de forma controlada:
</p>
<p style="font-size: 18px;"><strong>
“Considerando a variabilidade das vendas dentro de cada região, as diferenças entre as médias das regiões são grandes demais para serem explicadas pelo acaso?”
</strong></p>

<hr>

<!-- 2) DADOS DE VENDAS -->
<h2>2. Dados de Vendas</h2>

<p>A tabela abaixo resume o volume de vendas (em R$ mil) para as 20 lojas:</p>

<table>
    <tr>
        <th>ID</th><th>Região</th><th>Vendas (R$ mil)</th>
    </tr>
    <tr><td>1</td><td>Norte</td><td>35</td></tr>
    <tr><td>2</td><td>Norte</td><td>42</td></tr>
    <tr><td>3</td><td>Norte</td><td>40</td></tr>
    <tr><td>4</td><td>Norte</td><td>38</td></tr>
    <tr><td>5</td><td>Norte</td><td>37</td></tr>

    <tr><td>6</td><td>Sul</td><td>45</td></tr>
    <tr><td>7</td><td>Sul</td><td>48</td></tr>
    <tr><td>8</td><td>Sul</td><td>43</td></tr>
    <tr><td>9</td><td>Sul</td><td>44</td></tr>
    <tr><td>10</td><td>Sul</td><td>46</td></tr>

    <tr><td>11</td><td>Leste</td><td>28</td></tr>
    <tr><td>12</td><td>Leste</td><td>26</td></tr>
    <tr><td>13</td><td>Leste</td><td>30</td></tr>
    <tr><td>14</td><td>Leste</td><td>25</td></tr>
    <tr><td>15</td><td>Leste</td><td>27</td></tr>

    <tr><td>16</td><td>Oeste</td><td>33</td></tr>
    <tr><td>17</td><td>Oeste</td><td>32</td></tr>
    <tr><td>18</td><td>Oeste</td><td>36</td></tr>
    <tr><td>19</td><td>Oeste</td><td>30</td></tr>
    <tr><td>20</td><td>Oeste</td><td>34</td></tr>
</table>

<hr>

<!-- 3) PASSO A PASSO NO R -->
<h2>3. Passo a Passo no R: Código e Interpretação</h2>

<h3>3.1 Criação do conjunto de dados</h3>

<pre><code>regiao &lt;- c(
  rep("Norte", 5),
  rep("Sul",   5),
  rep("Leste", 5),
  rep("Oeste", 5)
)

vendas &lt;- c(
  35, 42, 40, 38, 37,   # Norte
  45, 48, 43, 44, 46,   # Sul
  28, 26, 30, 25, 27,   # Leste
  33, 32, 36, 30, 34    # Oeste
)

regiaoc &lt;- factor(regiao)
dados_vendas &lt;- data.frame(regiaoc, vendas)
dados_vendas</code></pre>

<p><strong>Interpretação:</strong> criamos um fator <code>regiaoc</code> com quatro níveis (as regiões) e um vetor numérico <code>vendas</code>. 
O <code>data.frame</code> <code>dados_vendas</code> organiza tudo em uma tabela que será usada na análise.</p>

<h3>3.2 Gráfico exploratório</h3>

<pre><code>library(ggplot2)
library(ggpubr)

ggline(dados_vendas, x = "regiaoc", y = "vendas",
       add = c("mean_se", "jitter"),
       palette = "jco",
       ylab = "Vendas (R$ mil)",
       xlab = "Região")</code></pre>

<p><strong>Interpretação do gráfico:</strong></p>
<ul>
    <li>Cada <strong>ponto</strong> representa a venda de uma loja específica.</li>
    <li>A <strong>linha</strong> conecta as <strong>médias</strong> de cada região.</li>
    <li>As <strong>barras verticais</strong> representam o erro padrão (incerteza na estimativa da média).</li>
</ul>
<p>
Visualmente, o Sul aparece com médias mais altas, o Leste com as mais baixas,
e Norte/Oeste em um nível intermediário. Porém, ainda não sabemos se essas diferenças
são estatisticamente significativas – isso será verificado pela ANOVA.
</p>

<h3>3.3 Ajuste do modelo de ANOVA</h3>

<pre><code>modelo_vendas &lt;- aov(vendas ~ regiaoc, data = dados_vendas)
summary(modelo_vendas)</code></pre>

<p><strong>Saída (simulada):</strong></p>

<pre><code>             Df Sum Sq Mean Sq F value  Pr(&gt;F)    
regiaoc       3  620.1  206.7   17.21 0.00002 ***
Residuals    16  192.0   12.0              
</code></pre>

<p><strong>Interpretação linha a linha:</strong></p>
<ul>
    <li><strong>Df:</strong> regiaoc tem 3 graus de liberdade (4 regiões − 1); os resíduos têm 16 (20 observações − 4 grupos).</li>
    <li><strong>Sum Sq:</strong> variabilidade explicada pelo fator (620,1) e variabilidade residual (192,0).</li>
    <li><strong>Mean Sq:</strong> são as “variâncias” associadas a cada fonte (Sum Sq / Df).</li>
    <li><strong>F value:</strong> mede quanto a variância entre regiões é maior que a variância dentro das regiões.</li>
    <li><strong>Pr(&gt;F):</strong> é o valor-p do teste F. Aqui, 0,00002 &lt; 0,05.</li>
</ul>

<p>
Como o valor-p é muito pequeno, rejeitamos H<sub>0</sub> e concluímos que
<strong>pelo menos uma região tem média de vendas diferente das demais</strong>.
</p>

<h3>3.4 Verificação das suposições</h3>

<h4>a) Normalidade dos resíduos</h4>

<pre><code>shapiro.test(modelo_vendas$residuals)</code></pre>

<p><strong>Saída (simulada):</strong></p>

<pre><code>Shapiro-Wilk normality test

W = 0.96, p-value = 0.61
</code></pre>

<p>
Como o valor-p é 0,61 (&gt; 0,05), não rejeitamos a hipótese de normalidade dos resíduos.
Logo, a suposição de normalidade é razoável.
</p>

<h4>b) Homogeneidade de variâncias</h4>

<pre><code>bartlett.test(vendas ~ regiaoc, data = dados_vendas)</code></pre>

<p><strong>Saída (simulada):</strong></p>

<pre><code>Bartlett test of homogeneity of variances

Bartlett's K-squared = 1.42, df = 3, p-value = 0.92
</code></pre>

<p>
O valor-p de 0,92 é muito maior que 0,05, indicando que não há evidências de
variâncias diferentes entre as regiões. A suposição de homocedasticidade é atendida.
</p>

<h3>3.5 Coeficientes do modelo</h3>

<pre><code>modelo_vendas$coefficients</code></pre>

<p><strong>Saída (simulada):</strong></p>

<pre><code>(Intercept)   regiaocNorte  regiaocOeste   regiaocSul 
      28.8           8.4           4.0         15.2 
</code></pre>

<p><strong>Interpretação:</strong></p>
<ul>
    <li><strong>(Intercept)</strong> = 28,8 → média de vendas na região de referência (Leste).</li>
    <li><strong>regiaocNorte</strong> = 8,4 → Norte vende, em média, 8,4 mil a mais que Leste.</li>
    <li><strong>regiaocOeste</strong> = 4,0 → Oeste vende, em média, 4,0 mil a mais que Leste.</li>
    <li><strong>regiaocSul</strong> = 15,2 → Sul vende, em média, 15,2 mil a mais que Leste (região com maior média).</li>
</ul>

<h3>3.6 Comparações múltiplas – Teste de Tukey</h3>

<pre><code>TukeyHSD(modelo_vendas)</code></pre>

<p><strong>Saída (simulada, resumo):</strong></p>

<pre><code>$regiaoc
               diff   lwr     upr     p adj
Norte-Leste    8.4   4.1    12.7   0.0004
Sul-Leste     15.2  10.9    19.5   0.00001
Oeste-Leste    4.0   0.3     7.7   0.032
Sul-Norte      6.8   3.1    10.5   0.001
Oeste-Norte   -4.4  -8.1    -0.7   0.020
Oeste-Sul    -11.2 -15.1    -7.3   0.0002
</code></pre>

<p><strong>Interpretação:</strong></p>
<ul>
    <li><strong>diff</strong>: diferença entre as médias de cada par de regiões.</li>
    <li><strong>lwr</strong> e <strong>upr</strong>: limites inferior e superior do intervalo de confiança de 95%.</li>
    <li><strong>p adj</strong>: valor-p ajustado (correção para múltiplas comparações).</li>
</ul>

<p>
Os pares com <strong>p adj &lt; 0,05</strong> têm médias significativamente diferentes.
No nosso exemplo, praticamente todas as comparações são significativas:
</p>
<ul>
    <li><strong>Sul</strong> vende significativamente mais que Norte, Leste e Oeste.</li>
    <li><strong>Leste</strong> vende significativamente menos que as outras regiões.</li>
    <li><strong>Norte</strong> e <strong>Oeste</strong> têm níveis intermediários, mas ainda assim diferentes entre si.</li>
</ul>

<hr>

<!-- 4) CONCLUSÃO ROBUSTA -->
<h2>4. Conclusão – Por que ANOVA faz diferença</h2>

<p>
Se tivéssemos olhado apenas para as <strong>médias simples</strong> de vendas,
veríamos algo como:
</p>
<ul>
    <li>Leste ≈ 27–29 mil</li>
    <li>Oeste ≈ 33–34 mil</li>
    <li>Norte ≈ 38–39 mil</li>
    <li>Sul ≈ 45–46 mil</li>
</ul>

<p>
Visualmente, parece que Sul é maior, Leste é menor e as outras duas estão entre elas.
Mas isso ainda não responde as perguntas importantes de negócio:
</p>

<ul>
    <li>“Essa diferença é grande o bastante para ser considerada real?”</li>
    <li>“Ou pode ser só variação normal entre lojas?”</li>
    <li>“Quais regiões realmente são diferentes das outras?”</li>
</ul>

<p>
A <strong>ANOVA</strong> respondeu essas perguntas de forma estatisticamente robusta:
</p>
<ul>
    <li>O valor-p da ANOVA (0,00002) mostra que a hipótese de médias iguais é
        extremamente improvável dado os dados.</li>
    <li>Os testes de Shapiro-Wilk e Bartlett confirmam que as suposições do modelo
        (normalidade e homocedasticidade) são aceitáveis neste conjunto.</li>
    <li>O teste de Tukey indicou exatamente <strong>quais</strong> regiões diferem entre si e em quanto.</li>
</ul>

<p>
Com isso, a empresa não só sabe que há diferenças,
mas também <strong>onde</strong> elas estão:
</p>
<ul>
    <li><strong>Sul</strong> é a região com melhor desempenho (média mais alta).</li>
    <li><strong>Leste</strong> é a região mais crítica (média mais baixa), demandando atenção em marketing, logística ou oferta.</li>
    <li><strong>Norte</strong> e <strong>Oeste</strong> ficam em um patamar intermediário.</li>
</ul>

<p>
Esse tipo de análise vai muito além de “olhar médias”:  
ela leva em conta a variabilidade interna, controla o erro estatístico
e fundamenta decisões estratégicas com base em evidências.
</p>

<hr>

<!-- 5) CÓDIGO R COMPLETO -->
<h2>5. Código R Completo</h2>

<pre><code># ANOVA - Volume de Vendas por Região
# Script completo

# Pacotes
library(ggplot2)
library(ggpubr)

# Dados
regiao &lt;- c(
  rep("Norte", 5),
  rep("Sul",   5),
  rep("Leste", 5),
  rep("Oeste", 5)
)

vendas &lt;- c(
  35, 42, 40, 38, 37,   # Norte
  45, 48, 43, 44, 46,   # Sul
  28, 26, 30, 25, 27,   # Leste
  33, 32, 36, 30, 34    # Oeste
)

regiaoc &lt;- factor(regiao)
dados_vendas &lt;- data.frame(regiaoc, vendas)

# Gráfico exploratório
ggline(dados_vendas, x = "regiaoc", y = "vendas",
       add = c("mean_se", "jitter"),
       palette = "jco",
       ylab = "Vendas (R$ mil)",
       xlab = "Região")

# Modelo de ANOVA
modelo_vendas &lt;- aov(vendas ~ regiaoc, data = dados_vendas)
summary(modelo_vendas)

# Testes de suposição
shapiro.test(modelo_vendas$residuals)          # normalidade
bartlett.test(vendas ~ regiaoc, data = dados_vendas)  # homogeneidade de variâncias

# Coeficientes do modelo
modelo_vendas$coefficients

# Comparações múltiplas (Tukey)
TukeyHSD(modelo_vendas)
plot(TukeyHSD(modelo_vendas), las = 1)
</code></pre>

</body>
</html>


